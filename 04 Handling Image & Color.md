# Handling Image & Color

# 1. Image View (Xcode12)

이미지뷰 label을 속성하면 인스펙터에서 이미지를 직접 지정할 수 있고 물론 코드로도 입력이 가능합니다. 잘 알아야 할 속성 중 하나는 Content Mode인데, 이미지뷰와 이미지의 크기가 다를 때 이미지를 나타내는 옵션입니다. 가장 많이 사용하는 옵션은 `Aspect Fit`으로 이미지의 종횡비를 유지하며 모든 이미지가 프레임 안에 나타날 수 있도록 출력됩니다. 또한 `Aspect Fill`도 많이 사용되는데 이 또한 종횡비가 유지되지만 이미지가 프레임을 꽉 채우도록 표현되기 때문에 프레임을 벗어나는 이미지가 발생할 수 있습니다. 이 때 속성값 중 Clips to bounds에 체크를 할 경우 프레임을 벗어나는 이미지는 보이지 않고 반대로 체크를 해제하면 프레임 즉, 이미지뷰를 벗어난 이미지도 존재합니다. 

인스펙터에서 이미지뷰의 `Highlighted` 상태를 설정할 수 있습니다. 다른 이미지를 설정할 수 있기 때문에 이러한 기능은 이미지 토글이 필요한 경우 사용합니다. 이미지 토글이 필요한 경우 또 다른 이미지뷰를 생성해야겠다고 생각했지만 그보다는 토글이 데이터 사용에도 용이하고 코드 작성도 간편합니다. 이렇게 highlighted 옵션에 추가한 후 필요할 때마다 불러오는 방식으로 사용합니다. 

이미지는 `Instrinsic content size`를 가지고 있습니다. 각각의 크기를 가지고 있으며, 이미지뷰를 먼저 추가하고 이미지를 넣었을 때에는 Content mode에 따라 이미지가 리사이징 되기 때문에 알 수 없지만 이 이미지뷰에 특정 제약을 추가할 경우 사이즈는 다시 본래의 크기로 조정되어 이미지뷰의 사이즈도 변경됩니다. 이때 이미지를 삭제하면 기준이 되는 이미지가 없어지는 것이기 때문에 제약 오류가 발생합니다. 

이미지는 .jpg, .png 등 표준 이미지를 허용하지만 .gif의 움직이는 이미지는 허용하지 않습니다. 그러나 애니메이션을 사용해 움직이는 듯한 이미지를 연출할 수 있습니다. 이미지 시퀀스를 사용한다고 표현합니다. 

```jsx
let images = [
	  UIImage(systemName: "speaker")!,
	  UIImage(systemName: "speaker.1")!,
	  UIImage(systemName: "speaker.2")!,
	  UIImage(systemName: "speaker.3")!
]
```

반복하고자 하는 이미지 시퀀스는 위와 같이 배열에 저장합니다.

```jsx
override func viewDidLoad() {
    super.viewDidLoad()
    imageView.animationImages = images
}
```

이미지뷰에 애니메이션을 생성하는 방법입니다. 

```jsx
@IBAction func startAnimation(_ sender: Any) {
    imageView.startAnimating()
}

@IBAction func stopAnimation(_ sender: Any) {
    if imageView.isAnimating {
        imageView.stopAnimating()
    }
}
```

화면에는 애니메이션을 실행하고 중지하는 각각의 버튼이 존재하고, 해당 버튼을 눌렀을 때 애니메이팅이 시작되거나 멈추도록 코드를 작성합니다. 이 때 중지하는 버튼에는 조건절을 추가했습니다. 만약 이미지가 작동하고 있다면 이미지를 멈추도록 구현합니다. 

현재 이 상태만으로도 반복되는 이미지를 화면에서 확인할 수 있습니다. 그러나 이미지의 전환 속도가 너무 빠르고 계속해서 반복되기 때문에 어느정도 조율이 필요합니다. 

애니메이션을 처음 생성했을 때 속도는 1초당 30 프레임이 출력되고 기본 반복 횟수는 무한대입니다. 이를 변경하기 위해 이미지뷰의 속성을 사용합니다.

```jsx
imageView.animationDuration = 1.0
imageView.animationRepeatCount = 3
```

animationDuration은 이미지가 전환되는 속도를 가리키는데 위와 같이 1.0으로 정의할 경우 모든 프레임이 1초동안 반복된다는 뜻입니다. 즉, 네장의 사진이기 때문에 사진은 한 장당 0.25초 씩 출력되는 것입니다. 

animationRepeatCount는 애니메이션이 반복되는 횟수를 지정합니다. 위와 같이 3으로 정의할 경우 애니메이션은 세 번 동작한 후 더이상 작동하지 않습니다. 기본값은 0으로 무한대를 의미합니다.

여기에서 추가적으로 알아야할 것이 있다면 시뮬레이터에서 화면을 구동했을 때 버튼을 누르기 전까지는 빈 화면이 보인다는 것입니다. placeholder가 필요합니다. 이는 인스펙터에서 이미지뷰의 초기 화면을 직접 이미지 시퀀스 중 하나로 지정하거나 코드에서 직접 images[0]을 이미지뷰에 보여지도록 초기값을 설정할 수 있습니다.